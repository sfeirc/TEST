openapi: 3.0.1
info:
  title: UniformizeProposal API
  version: 1.0.0

servers:
  - url: http://localhost:3001

paths:
  /uniformizeProposal:
    post:
      summary: Harmonize and standardize a sales / proposal slide deck.
      description: |
        Given a rough proposal deck (slides with inconsistent tone, wording, or structure),
        return a harmonized version aligned with Infotel's branding and messaging guidelines.
        The response also includes a change log (what was fixed slide-by-slide),
        and global recommendations to keep the deck consistent.
      operationId: uniformizeProposal
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                slides:
                  type: array
                  description: >
                    Current slides from the deck, represented as text only (MVP).
                    Each slide is its title + bullet points.
                  items:
                    type: object
                    properties:
                      title:
                        type: string
                        description: "Current slide title as provided by the user."
                      bullets:
                        type: array
                        description: "Current bullet points for this slide."
                        items:
                          type: string
                  minItems: 1
                brandingGuidelines:
                  type: string
                  description: >
                    Optional branding / tone rules to enforce.
                    Example: "Use Infotel name, professional tone, no slang,
                    max 5 bullets per slide, avoid emojis."
              required:
                - slides
      responses:
        "200":
          description: Harmonized deck proposal
          content:
            application/json:
              schema:
                type: object
                properties:
                  normalized_slides:
                    type: array
                    description: >
                      Cleaned, harmonized slides following Infotel's tone.
                      Titles should be executive-style and bullets concise,
                      business-focused, client-facing.
                    items:
                      type: object
                      properties:
                        title:
                          type: string
                          description: "Rewritten slide title (Infotel tone)."
                        bullets:
                          type: array
                          items:
                            type: string
                          description: "Rewritten bullet points (3-5 max, professional)."
                      required:
                        - title
                        - bullets

                  changes:
                    type: array
                    description: >
                      Change log describing what was fixed for each slide.
                      Useful to justify edits to sales / bid team.
                    items:
                      type: object
                      properties:
                        slide_index:
                          type: integer
                          description: "Index of the original slide (0-based)."
                        issue_type:
                          type: string
                          description: "tone | structure | branding | redundancy | jargon"
                        before:
                          type: string
                          description: "Original problematic text snippet."
                        after:
                          type: string
                          description: "Proposed fixed text."
                      required:
                        - slide_index
                        - issue_type
                        - before
                        - after

                  global_style_guidelines:
                    type: array
                    description: >
                      High-level style rules the team should follow across the full deck
                      (naming, tone, wording conventions).
                      This becomes the 'Infotel proposal voice'.
                    items:
                      type: string

                required:
                  - normalized_slides
