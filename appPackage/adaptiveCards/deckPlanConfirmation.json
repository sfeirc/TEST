{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "type": "AdaptiveCard",
  "version": "1.5",
  "body": [
    {
      "type": "Container",
      "style": "emphasis",
      "items": [
        {
          "type": "ColumnSet",
          "columns": [
            {
              "type": "Column",
              "width": "auto",
              "items": [
                {
                  "type": "Image",
                  "url": "https://upload.wikimedia.org/wikipedia/fr/e/e6/Logo-infotel.png",
                  "size": "high",
                  "width": "192px",
                  "altText": "Logo Infotel"
                }
              ]
            },
            {
              "type": "Column",
              "width": "stretch",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "üìã Plan de Pr√©sentation G√©n√©r√©",
                  "weight": "bolder",
                  "size": "large"
                },
                {
                  "type": "TextBlock",
                  "text": "${title}",
                  "wrap": true,
                  "isSubtle": true
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "separator": true,
      "spacing": "medium",
      "items": [
        {
          "type": "TextBlock",
          "text": "J'ai pr√©par√© une pr√©sentation de **${count(slides)} slides** pour vous. Voici le plan d√©taill√©:",
          "wrap": true,
          "size": "medium"
        }
      ]
    },
    {
      "type": "Container",
      "separator": true,
      "spacing": "medium",
      "$data": "${slides}",
      "items": [
        {
          "type": "ColumnSet",
          "columns": [
            {
              "type": "Column",
              "width": "auto",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "${$index + 1}",
                  "weight": "bolder",
                  "size": "large",
                  "color": "accent",
                  "horizontalAlignment": "center"
                }
              ]
            },
            {
              "type": "Column",
              "width": "stretch",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "${title}",
                  "weight": "bolder",
                  "wrap": true
                },
                {
                  "type": "TextBlock",
                  "text": "‚Ä¢ ${join(if(bullets, bullets, []), '\n‚Ä¢ ')}",
                  "wrap": true,
                  "spacing": "small",
                  "isSubtle": true
                }
              ]
            }
          ],
          "separator": true,
          "spacing": "small"
        }
      ]
    },
    {
      "type": "Container",
      "separator": true,
      "spacing": "large",
      "style": "attention",
      "items": [
        {
          "type": "TextBlock",
          "text": "‚ö° Action requise",
          "weight": "bolder",
          "size": "medium",
          "horizontalAlignment": "center"
        },
        {
          "type": "TextBlock",
          "text": "Ce plan vous convient-il? Choisissez une option ci-dessous:",
          "wrap": true,
          "horizontalAlignment": "center",
          "spacing": "small"
        }
      ]
    }
  ],
  "actions": [
    {
      "type": "Action.Submit",
      "title": "‚úÖ Confirmer et G√©n√©rer",
      "style": "positive",
      "data": {
        "action": "confirm_deck_generation",
        "plan": "${$root}"
      }
    },
    {
      "type": "Action.ShowCard",
      "title": "‚úèÔ∏è Modifier le Plan",
      "card": {
        "type": "AdaptiveCard",
        "body": [
          {
            "type": "TextBlock",
            "text": "üìù Que souhaitez-vous modifier?",
            "weight": "bolder"
          },
          {
            "type": "Input.ChoiceSet",
            "id": "modification_type",
            "style": "compact",
            "choices": [
              {
                "title": "Ajouter des slides",
                "value": "add_slides"
              },
              {
                "title": "Supprimer des slides",
                "value": "remove_slides"
              },
              {
                "title": "Changer le contenu",
                "value": "change_content"
              },
              {
                "title": "R√©organiser l'ordre",
                "value": "reorder"
              }
            ]
          },
          {
            "type": "Input.Text",
            "id": "modification_details",
            "placeholder": "D√©crivez vos modifications...",
            "isMultiline": true
          }
        ],
        "actions": [
          {
            "type": "Action.Submit",
            "title": "Envoyer les modifications",
            "data": {
              "action": "modify_deck_plan"
            }
          }
        ]
      }
    },
    {
      "type": "Action.Submit",
      "title": "üîÑ R√©g√©n√©rer le Plan",
      "data": {
        "action": "regenerate_deck_plan"
      }
    },
    {
      "type": "Action.Submit",
      "title": "‚ùå Annuler",
      "style": "destructive",
      "data": {
        "action": "cancel_deck_generation"
      }
    }
  ]
}

